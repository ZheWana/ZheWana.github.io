<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/bitbug_favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/bitbug_favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-bounce.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhewana.cn","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"似乎没有你想要的东西呢: ${query}","hits_stats":"找到${hits}条结果（用时${time}ms）"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言由于积分赛限制了控制器，因此不能使用我们熟悉的STM32来进行开发，所以选择了MSP432作为控制器，并且也将从头学习一下MSP432。  附完成的工程地址： https:&#x2F;&#x2F;wws.lanzoui.com&#x2F;iseTCpmf4kb">
<meta property="og:type" content="article">
<meta property="og:title" content="MSP432学习笔记">
<meta property="og:url" content="http://zhewana.cn/2021/a441f005e981/">
<meta property="og:site_name" content="ZheWana">
<meta property="og:description" content="前言由于积分赛限制了控制器，因此不能使用我们熟悉的STM32来进行开发，所以选择了MSP432作为控制器，并且也将从头学习一下MSP432。  附完成的工程地址： https:&#x2F;&#x2F;wws.lanzoui.com&#x2F;iseTCpmf4kb">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622276050150.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622468114640.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622467994167.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622468221716.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622470501084.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622472486950.png">
<meta property="og:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622471002332.png">
<meta property="article:published_time" content="2021-05-12T16:00:00.000Z">
<meta property="article:modified_time" content="2021-10-18T03:40:28.670Z">
<meta property="article:author" content="ZheWana">
<meta property="article:tag" content="单片机">
<meta property="article:tag" content="MSP432">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zhewana.cn/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622276050150.png">

<link rel="canonical" href="http://zhewana.cn/2021/a441f005e981/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MSP432学习笔记 | ZheWana</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">ZheWana</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">初心未泯</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-reference">

    <a href="/reference/" rel="section"><i class="fas fa-book fa-fw"></i>参考资料</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>朋友们</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhewana.cn/2021/a441f005e981/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="ZheWana">
      <meta itemprop="description" content="我们选择死亡还是努力活着呢？">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ZheWana">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MSP432学习笔记
        </h1>

        <div class="post-meta">
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-13 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-13T00:00:00+08:00">2021-05-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-18 11:40:28" itemprop="dateModified" datetime="2021-10-18T11:40:28+08:00">2021-10-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">单片机</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%8D%95%E7%89%87%E6%9C%BA/MSP432/" itemprop="url" rel="index"><span itemprop="name">MSP432</span></a>
                </span>
            </span>

          
            <span id="/2021/a441f005e981/" class="post-meta-item leancloud_visitors" data-flag-title="MSP432学习笔记" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/a441f005e981/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/a441f005e981/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于积分赛限制了控制器，因此不能使用我们熟悉的STM32来进行开发，所以选择了MSP432作为控制器，并且也将从头学习一下MSP432。</p>
<blockquote>
<p>附完成的工程地址：</p>
<p><a target="_blank" rel="noopener" href="https://wws.lanzoui.com/iseTCpmf4kb">https://wws.lanzoui.com/iseTCpmf4kb</a> </p>
</blockquote>
<span id="more"></span>

<p>这里是后期的我自己，文章的正文是在学习过程中随着进度一点一点写出来的，现在作品完成的接近尾声了，但是我觉得自己的了解并不够多，先说说自己的感受吧。</p>
<p>首先最大的感受就是使用TI的SDK库函数的时候的陌生感。这里就不得不对比一下HAL库和SDK了：</p>
<p>首先HAL给人最直观的感受就是封装度高，更适合新手上手，上手起来也很快。但是这也同样是HAL库的缺点。</p>
<p>在使用HAL库的时候，让人真的觉得就是在“使用”。因为你不知道里面干了什么，怎么干的，HAL的封装在你的面前就是一个巨大的黑盒子，使用的时候他在刻意的引导着我们让我们只关心“能用就行”，却忽略了背后的一些机制和原理。这不是HAL的问题，HAL的初心就是让程序员能脱离在机械化的初始化中浪费的时间，但是有一个巨大的前提—-这个程序员懂得其中的原理。而向我们这样的新手在用的时候就真的只会关心“能用就行”。</p>
<p>SDK则不一样，很多东西在不摸懂其中的原理之前是没办法调通的，这就逼迫着你去不断地翻阅参考手册、翻阅库函数手册、查资料等等，无形中增加了学习的深度以及对于原理的理解。</p>
<p>懂得不多，感受大概就这些，下面是正文。 </p>
<h2 id="系统时钟树以及滴答时钟"><a href="#系统时钟树以及滴答时钟" class="headerlink" title="系统时钟树以及滴答时钟"></a>系统时钟树以及滴答时钟</h2><h3 id="System-Timer-SysTick-—-系统滴答时钟"><a href="#System-Timer-SysTick-—-系统滴答时钟" class="headerlink" title="System Timer (SysTick)—-系统滴答时钟"></a>System Timer (SysTick)—-系统滴答时钟</h3><blockquote>
<p><strong>需要知道的内容：</strong></p>
<ul>
<li><p>Systick内部含有一个24位计数器，计数器最大值为1&lt;&lt;24</p>
</li>
<li><p>Systick计数频率等于系统主频（MCLK）</p>
</li>
<li><p>Systick计数器的计数方式为递减计数</p>
</li>
<li><p>Systick共含有三个寄存器功能分别如下：</p>
<ul>
<li>SysTick Control and Status Register (STCSR): A control and status register to configure its clock,enable the counter, enable the SysTick interrupt, and determine counter status.</li>
</ul>
<p>（系统设置寄存器即SysTick-&gt;CTRL）</p>
<ul>
<li>SysTick Reload Value Register (STRVR): The reload value for the counter, used to provide the counter’s wrap value.</li>
</ul>
<p>（计数周期寄存器即SysTick-&gt;LOAD，LOAD值等于period-1）</p>
<ul>
<li>SysTick Current Value Register (STCVR): The current value of the counter.  </li>
</ul>
<p>（当前计数值寄存器即SysTick-&gt;VAL）</p>
</li>
</ul>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//暂停看门狗</span></span><br><span class="line">WDT_A_holdTimer( <span class="keyword">void</span> );</span><br><span class="line"><span class="comment">//使能浮点运算单元</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FPU_enableModule</span> <span class="params">( <span class="keyword">void</span> )</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*常用Systick相关函数*/</span></span><br><span class="line"><span class="comment">//SysTick使失能函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_enableModule</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_disableModule</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//SysTick中断使失能函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_enableInterrupt</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_disableInterrupt</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//获取Counter周期、当前值函数</span></span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">SysTick_getPeriod</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">SysTick_getValue</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//设定Counter周期函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_setPeriod</span> <span class="params">(<span class="keyword">uint32_t</span> period)</span></span>;</span><br><span class="line"><span class="comment">//注册注销SysTick中断向量函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_registerInterrupt</span> <span class="params">(<span class="keyword">void</span>(∗intHandler)(<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SysTick_unregisterInterrupt</span> <span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="系统时钟树"><a href="#系统时钟树" class="headerlink" title="系统时钟树"></a>系统时钟树</h3><blockquote>
<p>  <strong>需要知道的内容：</strong></p>
<p>  **clock resources（时钟源）:  **</p>
<p>  • LFXTCLK: <strong>Low-frequency oscillator</strong> (LFXT) that can be used either with low-frequency 32768-Hz watch crystals, standard crystals, resonators, or external clock sources in the 32-kHz or below range. When in bypass mode, LFXTCLK can be driven with an external square wave signal in the 32-kHz or below range.</p>
<p>  （ <strong>低频振荡器</strong>（LFXT）可以与32kHz或以下范围的低频32768-Hz手表晶体，标准晶体，谐振器或外部时钟源一起使用。 在旁路模式下，可以使用32kHz或更低范围内的外部方波信号来驱动LFXTCLK。 ）</p>
<p>  • HFXTCLK: **High-frequency oscillator **(HFXT) that can be used with standard crystals or resonators in the 1-MHz to 48-MHz range. When in bypass mode, HFXTCLK can be driven with an external square wave signal.</p>
<p>  （ <strong>高频振荡器</strong>（HFXT），可与1MHz至48MHz范围内的标准晶体或谐振器一起使用。 在旁路模式下，可以使用外部方波信号驱动HFXTCLK。 ）</p>
<p>  • DCOCLK: <strong>Internal digitally controlled oscillator</strong> (DCO) with programmable frequencies and 3-MHz frequency by default</p>
<p>  （ <strong>内部数控振荡器</strong>（DCO），默认情况下具有可编程频率和3 MHz频率 ）</p>
<p>  • VLOCLK: <strong>Internal very-low-power low-frequency oscillator</strong> (VLO) with 9.4-kHz typical frequency</p>
<p>  （ <strong>内部超低功耗低频振荡器</strong>（VLO），典型频率为9.4kHz ）</p>
<p>  • REFOCLK : <strong>Internal, low-power low-frequency oscillator</strong> (REFO) with selectable 32.768-kHz or 128-kHz typical frequencies</p>
<p>  （ <strong>内部低功耗低频振荡器</strong>（REFO），具有可选的32.768 kHz或128 kHz典型频率 ）</p>
<p>  • MODCLK: <strong>Internal low-power oscillator</strong> with 25-MHz typical frequency</p>
<p>  （ <strong>内部低功耗振荡器</strong>，典型频率为25MHz ）</p>
<p>  • SYSOSC: <strong>Internal oscillator</strong> with 5-MHz typical frequency  </p>
<p>  （ <strong>内部振荡器</strong>，具有5-MHz典型频率 ）</p>
<p>  <strong>system clock signals（时钟信号）:</strong>    </p>
<p>  •ACLK: <strong>Auxiliary clock</strong>. ACLK is software selectable as LFXTCLK, VLOCLK, or REFOCLK. ACLK can be divided by 1, 2, 4, 8, 16, 32, 64, or 128. ACLK is software selectable by individual peripheral modules. ACLK is restricted to maximum frequency of operation of 128 kHz.</p>
<p>  ( <strong>辅助时钟</strong>。 ACLK可通过软件选择为LFXTCLK，VLOCLK或REFOCLK。 ACLK可以除以1、2、4、8、16、32、64或128。ACLK是可由各个外围模块选择的软件。 ACLK的最大工作频率限制为128 kHz。 )</p>
<p>  • MCLK: <strong>Master clock</strong>. MCLK is software selectable as LFXTCLK, VLOCLK, REFOCLK, DCOCLK,MODCLK, or HFXTCLK. MCLK can be divided by 1, 2, 4, 8, 16, 32, 64, or 128. MCLK is used by the CPU and peripheral module interfaces, as well as, used directly by some peripheral modules.</p>
<p>  ( <strong>主时钟</strong>。 MCLK可通过软件选择为LFXTCLK，VLOCLK，REFOCLK，DCOCLK，MODCLK或HFXTCLK。 MCLK可以除以1、2、4、8、16、32、64或128。MCLK由CPU和外围模块接口使用，以及直接由某些外围模块使用。 )</p>
<p>  • HSMCLK: <strong>Subsystem master clock</strong>. HSMCLK is software selectable as LFXTCLK, VLOCLK,REFOCLK, DCOCLK, MODCLK, HFXTCLK. HSMCLK can be divided by 1, 2, 4, 8, 16, 32, 64, or 128.HSMCLK is software selectable by individual peripheral modules.</p>
<p>  ( <strong>子系统主时钟</strong>。 HSMCLK可以选择为LFXTCLK，VLOCLK，REFOCLK，DCOCLK，MODCLK，HFXTCLK。 HSMCLK可以被1、2、4、8、16、32、64或128分频。HSMCLK是可由各个外围模块选择的软件。 )</p>
<p>  • SMCLK: <strong>Low-speed subsystem master clock</strong>. SMCLK uses the HSMCLK clock resource selection for its clock resource. SMCLK can be divided independently from HSMCLK by 1, 2, 4, 8, 16, 32, 64, or 128. SMCLK is limited in frequency to half of the rated maximum frequency of HSMCLK. SMCLK is software selectable by individual peripheral modules.</p>
<p>  (<strong>低速子系统主时钟</strong>。 SMCLK将HSMCLK时钟资源选择用于其时钟资源。 可以将SMCLK与HSMCLK分别分频为1、2、4、8、16、32、64或128。SMCLK的频率限制为HSMCLK额定最大频率的一半。 SMCLK是可由各个外围模块选择的软件。)    </p>
<p>  • BCLK:<strong>Low-speed backup domain clock</strong>. BCLK is software selectable as LFXTCLK and REFOCLK and is used primarily in the backup domain. BCLK is restricted to a maximum frequency of 32.768 kHz.  </p>
<p>  ( <strong>低速备份域时钟</strong>。 BCLK是软件可选的LFXTCLK和REFOCLK，主要用于备份域。 BCLK的最大频率限制为32.768 kHz。 )<img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622276050150.png" alt="1622276050150"></p>
</blockquote>
<p>上述为MSP432时钟系统介绍的截图，为了便于区分已经利用不同的颜色标出了不同的时钟总线。</p>
<p>根据上图可总结出如下时钟信号和时钟源的关系：</p>
<table>
<thead>
<tr>
<th align="center">时钟源\时钟信号</th>
<th align="center">ACLK</th>
<th align="center">MCLK</th>
<th align="center">HSMCLK</th>
<th align="center">SMCLK</th>
<th align="center">BCLK</th>
<th align="center">能否直接被其他外设使用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>LFXTCLK</strong></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center"><strong>VLO</strong></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center"><strong>REFO</strong></td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center"><strong>DCOCLK</strong></td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><strong>MODOSC</strong></td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">√</td>
</tr>
<tr>
<td align="center"><strong>HFXTCLK</strong></td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center"><strong>SYSOSC</strong></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">√</td>
</tr>
</tbody></table>
<h3 id="常用系统时钟函数"><a href="#常用系统时钟函数" class="headerlink" title="常用系统时钟函数"></a>常用系统时钟函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*常用时钟树相关函数*/</span></span><br><span class="line"><span class="comment">//获取各种外部时钟源的频率（用于调试时钟树很方便）</span></span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">CS_getACLK</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">CS_getBCLK</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">CS_getHSMCLK</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">CS_getMCLK</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint32_t</span> <span class="title">CS_getSMCLK</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//时钟信号初始化（用于设置时钟分频）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CS_initClockSignal</span><span class="params">(<span class="keyword">uint32_t</span> selectedClockSignal, <span class="keyword">uint32_t</span> clockSource, <span class="keyword">uint32_t</span> clockSourceDivider)</span></span>;</span><br><span class="line"><span class="comment">//设置DCOCLK频率范围中心（简单确定DCOCLK频率范围，后面需要加上一个频率设置函数确定具体频率）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CS_setDCOCenteredFrequency</span> <span class="params">(<span class="keyword">uint32_t</span> dcoFreq)</span></span>;</span><br><span class="line"><span class="comment">//设置DCOCLK频率值</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CS_setDCOFrequency</span> <span class="params">(<span class="keyword">uint32_t</span> dcoFrequency)</span></span>;</span><br></pre></td></tr></table></figure>



<h2 id="Digital-I-O（数字输入输出）"><a href="#Digital-I-O（数字输入输出）" class="headerlink" title="Digital I/O（数字输入输出）"></a>Digital I/O（数字输入输出）</h2><h3 id="Digital-I-O介绍"><a href="#Digital-I-O介绍" class="headerlink" title="Digital I/O介绍"></a>Digital I/O介绍</h3><p>虽然名字不同，但是和STM中的GPIO几乎完全相同。</p>
<p>甚至在DriverLib库的手册中直接用了GPIO的写法<del>（诶，我们不装了，摊牌了，就是一样的！）</del></p>
<p>不过有一点值得注意的是一个叫做外设GPIO的东西，它其实和GPIO完全不是一个东西。通俗的讲其实它是为其他的需要引脚来进行输入输出的外设选择了其需要的引脚并配置为相应的模式。例如IIC、SPI、PWM等等。</p>
<p>正是因此所以前面我说的内容其实并不严谨。应该是说：在<strong>通用输入输出功能</strong>上，他们虽然名字不同，但是和STM中的GPIO几乎完全相同。</p>
<p>但是仔细想一下，这两个手册中表现出的理解似乎并不一样：GPIO更像是<strong>功能性的叙述</strong>，说明该功能为通用输入输出；Digital I/O更像是<strong>硬件上的描述</strong>，只要是需要进行“数字输入输出“的功能都需要用到Digital I/O。</p>
<p>至于DriverLib中的相关函数，我对它们的评价是：通俗易懂。</p>
<p>真的就通俗易懂到只要翻译一下名字就知道是干什么的程度。</p>
<h3 id="常用GPIO函数汇总"><a href="#常用GPIO函数汇总" class="headerlink" title="常用GPIO函数汇总"></a>常用GPIO函数汇总</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GPIO模式设置</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsOutputPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort,<span class="keyword">uint_fast16_t</span> selectedPins)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsInputPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span> selectedPins)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsInputPinWithPullDownResistor</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort,</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">uint_fast16_t</span> selectedPins)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsInputPinWithPullUpResistor</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort,</span></span></span><br><span class="line"><span class="params"><span class="function"><span class="keyword">uint_fast16_t</span> selectedPins)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//外设GPIO设置</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsPeripheralModuleFunctionInputPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort,<span class="keyword">uint_fast16_t</span> selectedPins,<span class="keyword">uint_fast8_t</span> mode)</span></span>;<span class="comment">//模式参数：GPIO_PRIMARY_MODULE_FUNCTION/GPIO_SECONDARY_MODULE_FUNCTION/GPIO_TERTIARY_MODULE_FUNCTION</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setAsPeripheralModuleFunctionOutputPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort,<span class="keyword">uint_fast16_t</span> selectedPins,<span class="keyword">uint_fast8_t</span> mode)</span></span>;<span class="comment">//模式参数：GPIO_PRIMARY_MODULE_FUNCTION/GPIO_SECONDARY_MODULE_FUNCTION/GPIO_TERTIARY_MODULE_FUNCTION</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIO输出设置</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setOutputHighOnPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_setOutputLowOnPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_toggleOutputOnPin</span><span class="params">(<span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//GPIO输入读取</span></span><br><span class="line"><span class="function"><span class="keyword">uint8_t</span> <span class="title">GPIO_getInputPinValue</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins )</span></span>;<span class="comment">//返回：GPIO_INPUT_PIN_HIGH/GPIO_INPUT_PIN_LOW</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">//GPIO中断设置</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_clearInterruptFlag</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_disableInterrupt</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_enableInterrupt</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins )</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_interruptEdgeSelect</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">uint_fast16_t</span></span></span></span><br><span class="line"><span class="params"><span class="function">selectedPins, <span class="keyword">uint_fast8_t</span> edgeSelect )</span></span>;<span class="comment">//模式参数：GPIO_HIGH_TO_LOW_TRANSITION/GPIO_LOW_TO_HIGH_TRANSITION</span></span><br><span class="line"><span class="function"><span class="keyword">uint_fast16_t</span> <span class="title">GPIO_getEnabledInterruptStatus</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort )</span></span>;<span class="comment">//返回端口引脚的逻辑或结果</span></span><br><span class="line"><span class="comment">//中断向量处理</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_registerInterrupt</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort, <span class="keyword">void</span>(∗)(<span class="keyword">void</span>) intHandler )</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GPIO_unregisterInterrupt</span> <span class="params">( <span class="keyword">uint_fast8_t</span> selectedPort )</span></span>;<span class="comment">//注销中断向量</span></span><br></pre></td></tr></table></figure>

<h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="定时器介绍"><a href="#定时器介绍" class="headerlink" title="定时器介绍"></a>定时器介绍</h3><p>我认为MSP432与ST的定时器区别最大的地方在于它将32位定时器和16位定时器分开来，将PWM的功能仅仅赋予16位定时器。</p>
<p>本次比赛并未用到过32位定时器，因此我也不好多说，此处介绍我们用到的16位定时器的部分功能。</p>
<blockquote>
<p><strong>需要知道的东西：</strong></p>
<ul>
<li>定时器模块图：</li>
</ul>
<p><img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622468114640.png" alt="1622468114640"></p>
<ul>
<li><p>UPMODE是从0计数到CCR0</p>
</li>
<li><p>UPDOWNMODE是先递增计数到CCR0再递减计数到0，其中CCR0=period*1/2</p>
</li>
<li><p>CONTINOUSMODE是从0计数到0xFFFF</p>
</li>
<li><p>定时器中并没有影子寄存器的说法，但是其实官方默认是具有类似ST中影子寄存器的功能的：</p>
<ul>
<li>UPMODE中的说明：</li>
</ul>
</li>
</ul>
<p> <img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622467994167.png" alt="1622467994167"></p>
<ul>
<li>UPDOWNMODE中的说明：</li>
</ul>
<p> <img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622468221716.png" alt="1622468221716"></p>
</blockquote>
<h3 id="定时器函数"><a href="#定时器函数" class="headerlink" title="定时器函数"></a>定时器函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*相关结构体*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Timer_A_ContinuousModeConfig</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSource;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSourceDivider;</span><br><span class="line">    <span class="comment">//注意：此处的分频是指在主频经过分频后得到的对应时钟频率的基础上进行分频</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerInterruptEnable_TAIE;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerClear;</span><br><span class="line">&#125; Timer_A_ContinuousModeConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Timer_A_UpDownModeConfig</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSource;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSourceDivider;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerPeriod;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerInterruptEnable_TAIE;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> captureCompareInterruptEnable_CCR0_CCIE;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerClear;</span><br><span class="line">&#125; Timer_A_UpDownModeConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Timer_A_UpModeConfig</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSource;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSourceDivider;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerPeriod;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerInterruptEnable_TAIE;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> captureCompareInterruptEnable_CCR0_CCIE;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerClear;</span><br><span class="line">&#125; Timer_A_UpModeConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">Timer_A_PWMConfig</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSource;</span><br><span class="line">    <span class="comment">//TIMER_A_CLOCKSOURCE_EXTERNAL_TXCLK</span></span><br><span class="line">    <span class="comment">//TIMER_A_CLOCKSOURCE_ACLK</span></span><br><span class="line">    <span class="comment">//TIMER_A_CLOCKSOURCE_SMCLK</span></span><br><span class="line">	<span class="comment">//TIMER_A_CLOCKSOURCE_INVERTED_EXTERNAL_TXCLK</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockSourceDivider;</span><br><span class="line">    <span class="comment">//TIMER_A_CLOCKSOURCE_DIVIDER_1，2，3，4，5，6，7，8，10，12，14</span></span><br><span class="line">    <span class="comment">//TIMER_A_CLOCKSOURCE_DIVIDER_16，20，24，28，32，40，48，56，64</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> timerPeriod;</span><br><span class="line">    <span class="comment">//selects the desired timer period</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> compareRegister;</span><br><span class="line">    <span class="comment">//TIMER_A_CAPTURECOMPARE_REGISTER_0，1，2，3，4，5，6</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> compareOutputMode;</span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_OUTBITVALUE,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_SET,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_TOGGLE_RESET,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_SET_RESET</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_TOGGLE,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_RESET,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_TOGGLE_SET,</span></span><br><span class="line">    <span class="comment">//TIMER_A_OUTPUTMODE_RESET_SET</span></span><br><span class="line">    <span class="keyword">uint_fast16_t</span> dutyCycle;</span><br><span class="line">    <span class="comment">//specifies the dutycycle for the generated waveform</span></span><br><span class="line">&#125; Timer_A_PWMConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*相关函数*/</span></span><br><span class="line"><span class="comment">//三种计数模式配置函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_configureContinuousMode</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">const</span> Timer_A_ContinuousModeConfig ∗config)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_configureUpDownMode</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">const</span> Timer_A_UpDownModeConfig　∗config)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_configureUpMode</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">const</span> Timer_A_UpModeConfig ∗config)</span></span>;</span><br><span class="line"><span class="comment">//PWM相关函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_generatePWM</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">const</span> Timer_A_PWMConfig ∗config)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_setCompareValue</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">uint_fast16_t</span> compareRegister,<span class="keyword">uint_fast16_t</span> compareValue)</span></span>;</span><br><span class="line"><span class="comment">//中断相关函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_enableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> timer)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_disableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> timer)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_clearInterruptFlag</span> <span class="params">(<span class="keyword">uint32_t</span> timer)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_registerInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">uint_fast8_t</span> interruptSelect, <span class="keyword">void</span>(∗intHandler)(<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Timer_A_unregisterInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> timer, <span class="keyword">uint_fast8_t</span> interruptSelect)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="系统中断（NVIC）"><a href="#系统中断（NVIC）" class="headerlink" title="系统中断（NVIC）"></a>系统中断（NVIC）</h2><h3 id="一点小小想法"><a href="#一点小小想法" class="headerlink" title="一点小小想法"></a>一点小小想法</h3><p><strong>PS:暂且将Interrupt开头的函数称为系统中断函数，而各个外设中的中断函数成为外设中断函数。</strong></p>
<p>学习中断函数的时候能感受到这个库的逻辑和HAL库最大的差别在于对中断向量的处理：</p>
<p>HAL库将中断处理函数全部写好了，给用户保留了中断回调函数作为接口，开机载入中断向量表的时候会将所有的中断处理函数都作为中断向量加载好，接着在中断处理函数中调用回调函数进而实现将用户代码加入中断中的目的。而SDK的中断向量表从一开始就是空的，用户需要自行编写中断处理函数，并且自行注册中断向量，进而实现发生中断时对中断内部代码的调用。</p>
<p>说简单点就是HAL库棒用户填好了中断向量表，而SDK则需要用户自行填写中断向量表，两种方式自然各有利弊。</p>
<p>HAL库最大的好处就是它简单，使用的时候很简单，只需要写一个回调函数就能完成中断内部函数的书写，对新手友好。但是我个人认为最大的缺点在于没有给新手一个好的引导，这也是我用了SDK的中断部分以后最大的感受：受益匪浅。这种函数的组织方式能让人更好的感受到有一个叫做“中断向量表”的东西一直在指引着程序，让程序知道发生了中断以后该执行什么函数。</p>
<h3 id="常用系统中断函数"><a href="#常用系统中断函数" class="headerlink" title="常用系统中断函数"></a>常用系统中断函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*中断相关函数*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Interrupt_disableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> interruptNumber)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Interrupt_enableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> interruptNumber)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Interrupt_registerInterrupt</span><span class="params">(<span class="keyword">uint32_t</span> interruptNumber,<span class="keyword">void</span> (*intHandler)(<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Interrupt_unregisterInterrupt</span><span class="params">(<span class="keyword">uint32_t</span> interruptNumber)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li>使能某中断时必须<strong>同时调用</strong>外设中断使能函数和系统中断使能函数。</li>
<li>各个外设对应的注册中断向量函数其实内部调用了<strong>系统中断使能函数</strong>和<strong>系统注册中断向量函数</strong></li>
</ul>
</blockquote>
<h2 id="串口（UART）"><a href="#串口（UART）" class="headerlink" title="串口（UART）"></a>串口（UART）</h2><h3 id="串口介绍"><a href="#串口介绍" class="headerlink" title="串口介绍"></a>串口介绍</h3><p>其实串口没啥好介绍的，就是为了标题能整整齐齐所以写了这里。</p>
<p>其实还是看到了一些看起来很新奇的功能模块的，只不过还没用起来过，所以也不好说什么。</p>
<p>或许以后再次接触的时候会用到呢，这里留个坑吧。</p>
<blockquote>
<p><strong>看到的有趣功能：</strong></p>
<ul>
<li><p>Automatic Baud-Rate Detection （自动波特率检测？）</p>
</li>
<li><p>Automatic Error Detection  （自动错误侦测？）</p>
</li>
</ul>
</blockquote>
<h3 id="常用串口函数"><a href="#常用串口函数" class="headerlink" title="常用串口函数"></a>常用串口函数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*串口配置结构体*/</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> _<span class="title">eUSCI_eUSCI_UART_ConfigV1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">uint_fast8_t</span> selectClockSource;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> clockPrescalar;<span class="comment">//对应取值见设备用户指南（DEVICE USER GUIDE）</span></span><br><span class="line">    <span class="keyword">uint_fast8_t</span> firstModReg;	 <span class="comment">//对应取值见设备用户指南（DEVICE USER GUIDE）</span></span><br><span class="line">    <span class="keyword">uint_fast8_t</span> secondModReg;   <span class="comment">//对应取值见设备用户指南（DEVICE USER GUIDE）</span></span><br><span class="line">    <span class="keyword">uint_fast8_t</span> parity;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> msborLsbFirst;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> numberofStopBits;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> uartMode;</span><br><span class="line">    <span class="keyword">uint_fast8_t</span> overSampling;</span><br><span class="line">    <span class="keyword">uint_fast16_t</span> dataLength;</span><br><span class="line">&#125; eUSCI_UART_ConfigV1;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结构体各部分定义及其取值：</strong></p>
<p><img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622470501084.png" alt="1622470501084"></p>
<p><strong>关于上述结构体中注释的三个变量的取值方式：</strong></p>
<p>在USER GUID中查表可得对应取值：</p>
<p><img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622472486950.png" alt="1622472486950"></p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*串口函数*/</span></span><br><span class="line"><span class="comment">//使能、失能串口</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_enableModule</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_disableModule</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance)</span></span>;</span><br><span class="line"><span class="comment">//初始化串口</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">UART_initModule</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">const</span> eUSCI_UART_ConfigV1 ∗config)</span></span>;</span><br><span class="line"><span class="comment">//串口收发数据（单字节形式）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_transmitData</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">uint_fast8_t</span> transmitData)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">uint8_t</span> <span class="title">UART_receiveData</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance)</span></span>;</span><br><span class="line"><span class="comment">//使能、失能串口中断</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_enableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">uint_fast8_t</span> mask)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_disableInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">uint_fast8_t</span> mask)</span></span>;</span><br><span class="line"><span class="comment">//清除中断标志位</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_clearInterruptFlag</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">uint_fast8_t</span> mask)</span></span>;</span><br><span class="line"><span class="comment">//注册、注销中断向量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_registerInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">void</span>(∗intHandler)(<span class="keyword">void</span>))</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_unregisterInterrupt</span> <span class="params">(<span class="keyword">uint32_t</span> moduleInstance)</span></span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>需要注意的内容：</strong></p>
<ul>
<li>UART_initModule()函数并不能使能串口，手册说明如下：</li>
</ul>
<p><img src="/images/MSP432%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1622471002332.png" alt="1622471002332"></p>
<ul>
<li>UART_receiveData()函数只有在没有使能串口中断的时候才会轮询中断标志位，也就是说会阻塞程序的运行；当使能中断后就不会再轮询标志位了（因为标志位的变化会引起串口中断，用户可以在中断中进行数据的处理）。</li>
<li>串口的中断接收没法进行断点式的调试，毕竟接收函数并没有轮询标志位，也就不会等着下一个字节数据的到来，信号在线路中传输是不会等待你下断点调试的。</li>
</ul>
</blockquote>
<h2 id="工程函数总结"><a href="#工程函数总结" class="headerlink" title="工程函数总结"></a>工程函数总结</h2><p>在使用的过程中，为了使用方便，我们将我们用到的函数进行了模块化的封装，对应文件内容如下：</p>
<p><strong>user.c</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by ZheWana on 2021/5/26.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;user.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UARTRetargetInit</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    GPIO_setAsPeripheralModuleFunctionInputPin(GPIO_PORT_P1, GPIO_PIN2 | GPIO_PIN3,</span><br><span class="line">                                               GPIO_PRIMARY_MODULE_FUNCTION);</span><br><span class="line">    <span class="keyword">const</span> eUSCI_UART_ConfigV1 uartConfig =</span><br><span class="line">            &#123;</span><br><span class="line">                    EUSCI_A_UART_CLOCKSOURCE_SMCLK,<span class="comment">//选择时钟源</span></span><br><span class="line">                    <span class="number">6</span>,							   <span class="comment">//In device guide:UCBRx</span></span><br><span class="line">                    <span class="number">8</span>,                             <span class="comment">//In device guide:UCBRFx</span></span><br><span class="line">                    <span class="number">0x11</span>,                          <span class="comment">//In device guide:UCBRSx</span></span><br><span class="line">                    EUSCI_A_UART_NO_PARITY,		   <span class="comment">//极性设置</span></span><br><span class="line">                    EUSCI_A_UART_LSB_FIRST,        <span class="comment">//设置高低位优先</span></span><br><span class="line">                    EUSCI_A_UART_ONE_STOP_BIT,	   <span class="comment">//停止位数</span></span><br><span class="line">                    EUSCI_A_UART_MODE,			   <span class="comment">//串口模式</span></span><br><span class="line">                    EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION,</span><br><span class="line">                    EUSCI_A_UART_8_BIT_LEN		   <span class="comment">//数据长度</span></span><br><span class="line">            &#125;;</span><br><span class="line">    <span class="comment">//配置时钟源，其中SMCLK进行4分频</span></span><br><span class="line">    <span class="comment">//主频48000000</span></span><br><span class="line">    <span class="comment">//SMCLK为12000000</span></span><br><span class="line">    CS_setDCOCenteredFrequency(CS_DCO_FREQUENCY_48);</span><br><span class="line">    CS_setDCOFrequency(<span class="number">48000000</span>);</span><br><span class="line">    CS_initClockSignal(CS_SMCLK,CS_DCOCLK_SELECT,CS_CLOCK_DIVIDER_4);</span><br><span class="line">    <span class="comment">//串口模块初始化以及使能</span></span><br><span class="line">    UART_initModule(EUSCI_A0_BASE, &amp;uartConfig);</span><br><span class="line">    UART_enableModule(EUSCI_A0_BASE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//串口重定向函数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">UART_printf</span><span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span> </span>&#123;</span><br><span class="line">    va_list ap;</span><br><span class="line">    va_start(ap, fmt);</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">char</span> buffer[<span class="number">128</span>];</span><br><span class="line">    length = vsnprintf(buffer, <span class="number">128</span>, fmt, ap);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">        UART_transmitData(moduleInstance, *(buffer + i));</span><br><span class="line">    va_end(ap);</span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int32_t</span> CNT;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Encoder_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">uint8_t</span> temp = GPIO_getInputPinValue(GPIO_PORT_P3, GPIO_PIN2);</span><br><span class="line">    <span class="keyword">uint32_t</span> status;</span><br><span class="line"></span><br><span class="line">    status = MAP_GPIO_getEnabledInterruptStatus(GPIO_PORT_P3);</span><br><span class="line">    MAP_GPIO_clearInterruptFlag(GPIO_PORT_P3, status);</span><br><span class="line">    <span class="keyword">if</span> (status &amp; GPIO_PIN3) &#123;</span><br><span class="line">        MAP_GPIO_toggleOutputOnPin(GPIO_PORT_P1, GPIO_PIN0);</span><br><span class="line">        <span class="keyword">if</span> (temp == GPIO_INPUT_PIN_HIGH) &#123;</span><br><span class="line">            CNT++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp == GPIO_INPUT_PIN_LOW) &#123;</span><br><span class="line">            CNT--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EncoderInit</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="comment">//GPIO模式设置</span></span><br><span class="line">    GPIO_setAsInputPinWithPullUpResistor(GPIO_PORT_P3, GPIO_PIN3);</span><br><span class="line">    GPIO_setAsInputPinWithPullUpResistor(GPIO_PORT_P3, GPIO_PIN2);</span><br><span class="line">    <span class="comment">//清除中断标志位</span></span><br><span class="line">    GPIO_clearInterruptFlag(GPIO_PORT_P3, GPIO_PIN3);</span><br><span class="line">    <span class="comment">//中断使能</span></span><br><span class="line">    GPIO_enableInterrupt(GPIO_PORT_P3, GPIO_PIN3);</span><br><span class="line">    <span class="comment">//中断触发边沿选择</span></span><br><span class="line">    GPIO_interruptEdgeSelect(GPIO_PORT_P3, GPIO_PIN3, GPIO_LOW_TO_HIGH_TRANSITION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//中断使能以及中断向量注册</span></span><br><span class="line">    Interrupt_enableInterrupt(INT_PORT3);</span><br><span class="line">    Interrupt_enableMaster();</span><br><span class="line">    Interrupt_registerInterrupt(INT_PORT3, Encoder_IRQHandler);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TIMERA0_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    Timer_A_clearInterruptFlag(TIMER_A0_BASE);</span><br><span class="line">    <span class="comment">/********</span></span><br><span class="line"><span class="comment">    *处理函数*</span></span><br><span class="line"><span class="comment">    ********/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TimerIntuerruptInit</span><span class="params">(<span class="keyword">double</span> period)</span></span>&#123;</span><br><span class="line">    Timer_A_UpModeConfig Timer=&#123;</span><br><span class="line">            TIMER_A_CLOCKSOURCE_ACLK,</span><br><span class="line">            TIMER_A_CLOCKSOURCE_DIVIDER_1,</span><br><span class="line">            (<span class="keyword">int</span>)(period/<span class="number">1000</span>*<span class="number">32000</span>),</span><br><span class="line">            TIMER_A_TAIE_INTERRUPT_ENABLE,</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    Timer_A_configureUpMode(TIMER_A0_BASE,&amp;Timer);</span><br><span class="line">    Timer_A_enableInterrupt(TIMER_A0_BASE);</span><br><span class="line">    Timer_A_clearInterruptFlag(TIMER_A0_BASE);</span><br><span class="line">    Interrupt_enableInterrupt(INT_TA0_N);</span><br><span class="line">    Interrupt_enableMaster();</span><br><span class="line">    Interrupt_registerInterrupt(INT_TA0_N, TIMERA0_IRQHandler);</span><br><span class="line">    Timer_A_startCounter(TIMER_A0_BASE, TIMER_A_UP_MODE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delay_ms</span><span class="params">(<span class="keyword">int</span> freq, <span class="keyword">int</span> time)</span> </span>&#123;</span><br><span class="line">    SysTick_enableModule();</span><br><span class="line">    SysTick_setPeriod(<span class="number">1</span>&lt;&lt;<span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">    SysTick-&gt;VAL=<span class="number">1</span>&lt;&lt;<span class="number">24</span>;</span><br><span class="line">    <span class="keyword">uint32_t</span> a = SysTick_getValue();</span><br><span class="line">    <span class="keyword">while</span> ((a - SysTick_getValue()) &lt; freq / <span class="number">1000</span> * time);</span><br><span class="line">    SysTick_disableModule();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> uartflag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> ch = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="keyword">char</span> buff[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">double</span> data, p, i, d, a;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    buff[cnt] = UART_receiveData(EUSCI_A0_BASE);</span><br><span class="line">    cnt++;</span><br><span class="line">    <span class="keyword">if</span> (cnt == <span class="number">5</span>)cnt = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>user.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Created by ZheWana on 2021/5/26.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> TEMPLATE_USER_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEMPLATE_USER_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ti/devices/msp432p4xx/driverlib/driverlib.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdarg.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//串口重定向初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UARTRetargetInit</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//串口重定向输出函数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">UART_printf</span><span class="params">(<span class="keyword">uint32_t</span> moduleInstance, <span class="keyword">const</span> <span class="keyword">char</span> *fmt, ...)</span></span>;</span><br><span class="line"><span class="comment">//定时器中断处理函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TIMERA0_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//定时器中断初始化函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">TimerIntuerruptInit</span><span class="params">(<span class="keyword">double</span> period)</span></span>;</span><br><span class="line"><span class="comment">//编码器初始化函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EncoderInit</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//编码器对应IO中断处理函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Encoder_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="comment">//毫秒延时函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delay_ms</span><span class="params">(<span class="keyword">int</span> freq, <span class="keyword">int</span> time)</span></span>;</span><br><span class="line"><span class="comment">//串口中断回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">UART_IRQHandler</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">//TEMPLATE_USER_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>因为比赛原因所以学习的其实很仓促，所以很多东西理解的并不好，接下来会找时间系统的好好学习一下的。</p>
<p><strong>路漫漫其修远兮，吾将上下而求索。</strong></p>

    </div>

    
    
    
    
      <div>
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:24px;">-------------EOF-------------</div>
    
</div>
      </div>
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>ZheWana
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://zhewana.cn/2021/a441f005e981/" title="MSP432学习笔记">http://zhewana.cn/2021/a441f005e981/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" rel="tag"># 单片机</a>
              <a href="/tags/MSP432/" rel="tag"># MSP432</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/bed4a5279825/" rel="prev" title="Everybody loves Somebody">
      <i class="fa fa-chevron-left"></i> Everybody loves Somebody
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/8e2b5d35a586/" rel="next" title="HAL库基本函数（上）">
      HAL库基本函数（上） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9F%E6%A0%91%E4%BB%A5%E5%8F%8A%E6%BB%B4%E7%AD%94%E6%97%B6%E9%92%9F"><span class="nav-number">2.</span> <span class="nav-text">系统时钟树以及滴答时钟</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#System-Timer-SysTick-%E2%80%94-%E7%B3%BB%E7%BB%9F%E6%BB%B4%E7%AD%94%E6%97%B6%E9%92%9F"><span class="nav-number">2.1.</span> <span class="nav-text">System Timer (SysTick)—-系统滴答时钟</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9F%E6%A0%91"><span class="nav-number">2.2.</span> <span class="nav-text">系统时钟树</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%92%9F%E5%87%BD%E6%95%B0"><span class="nav-number">2.3.</span> <span class="nav-text">常用系统时钟函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Digital-I-O%EF%BC%88%E6%95%B0%E5%AD%97%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">Digital I&#x2F;O（数字输入输出）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Digital-I-O%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.1.</span> <span class="nav-text">Digital I&#x2F;O介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8GPIO%E5%87%BD%E6%95%B0%E6%B1%87%E6%80%BB"><span class="nav-number">3.2.</span> <span class="nav-text">常用GPIO函数汇总</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="nav-number">4.</span> <span class="nav-text">定时器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.1.</span> <span class="nav-text">定时器介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E5%87%BD%E6%95%B0"><span class="nav-number">4.2.</span> <span class="nav-text">定时器函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%96%AD%EF%BC%88NVIC%EF%BC%89"><span class="nav-number">5.</span> <span class="nav-text">系统中断（NVIC）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E7%82%B9%E5%B0%8F%E5%B0%8F%E6%83%B3%E6%B3%95"><span class="nav-number">5.1.</span> <span class="nav-text">一点小小想法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%E6%96%AD%E5%87%BD%E6%95%B0"><span class="nav-number">5.2.</span> <span class="nav-text">常用系统中断函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%EF%BC%88UART%EF%BC%89"><span class="nav-number">6.</span> <span class="nav-text">串口（UART）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E4%BB%8B%E7%BB%8D"><span class="nav-number">6.1.</span> <span class="nav-text">串口介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E4%B8%B2%E5%8F%A3%E5%87%BD%E6%95%B0"><span class="nav-number">6.2.</span> <span class="nav-text">常用串口函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E7%A8%8B%E5%87%BD%E6%95%B0%E6%80%BB%E7%BB%93"><span class="nav-number">7.</span> <span class="nav-text">工程函数总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E8%AE%B0"><span class="nav-number">8.</span> <span class="nav-text">后记</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="ZheWana"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">ZheWana</p>
  <div class="site-description" itemprop="description">我们选择死亡还是努力活着呢？</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=1312560006&site=qq&menu=yes" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;1312560006&amp;site&#x3D;qq&amp;menu&#x3D;yes" rel="noopener" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2021-05 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ZheWana</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共56.9k字</span>
</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='255,255,255' opacity='0.8' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : '4fMpcW3bliAwhjPEBWTKEJWj-MdYXbMMI',
      appKey     : 'MYYtUrRje94VyfnadYjkrqnT',
      placeholder: "请尽情吐槽\\(￣︶￣*\\))",
      avatar     : 'robohash',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

<!-- Qmsg -->
<script>
var title2="msg=W4J1e's blog又有新评论啦~！\n"
var SCKEY_Qmsg="https://qmsg.zendee.cn/send/你的key"
var ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];
function send_valine_Qmsg(){
  var pagename=document.title;
  var wz=pagename.indexOf('|');
  var res=pagename.substring(0,wz);
  var pageurl=document.URL;
  var ptime=new Date();
  var vnick=document.getElementsByClassName("vnick vinput")[0].value;
  var vmail=document.getElementsByClassName("vmail vinput")[0].value;
  var vlink=document.getElementsByClassName("vlink vinput")[0].value;
  var veditor=document.getElementsByClassName("veditor vinput")[0].value;
  var data="昵称："+vnick+"\n邮箱："+vmail+"\n网站地址："+vlink+"\n当前页面："+pagename+"\n评论内容："+veditor+"\n跳转链接："+pageurl+"\n评论时间"+ptime.toLocaleString();
  var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
  httpRequest.open('POST',SCKEY_Qmsg, true); //第二步：打开连接
  httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
  httpRequest.send(title2+data);//发送请求 
};

   document.body.addEventListener('click', function(e) {
   if(e.target.className.indexOf('vsubmit') === -1) {
     return;
   }
   send_valine_Qmsg();
})


<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"/>
<script src="/live2d-widget/autoload.js"></script>


</body>
</html>
